{
    "name": "IAR for STM8",
    "global": {
        "misc-controls": {
            "type": "list",
            "command": "",
            "group": [
                "c/cpp",
                "asm",
                "linker"
            ]
        }
    },
    "groups": {
        "c/cpp": {
            "$path": "stm8\\bin\\iccstm8.exe",
            "$includes": {
                "body": "-I ${value}"
            },
            "$defines": {
                "body": "-D ${key}=${value}"
            },
            "$invoke": {
                "useFile": true,
                "body": "-f ${value}"
            },
            "$output": "-o ${out} ${in}",
            "$default": [
                "--debug",
                "--silent"
            ],
            "$listPath": {
                "type": "value",
                "command": "-lc ${listPath}"
            },
            "$language-c": {
                "type": "selectable",
                "command": {
                    "false": "",
                    "c99": "",
                    "c89": "--c89"
                },
                "exclude": [ "--no_static_destruction" ]
            },
            "$language-cpp": {
                "type": "selectable",
                "command": {
                    "Embedded-C++": "--ec++",
                    "Extended-EC++": "--eec++",
                    "false": "--eec++"
                },
                "exclude": [ "--vla", "--use_c++_inline" ]
            },
            "destroy-cpp-static-object": {
                "type": "selectable",
                "command": {
                    "true": "",
                    "false": "--no_static_destruction"
                }
            },
            "allow-VLA": {
                "type": "selectable",
                "command": {
                    "true": "--vla",
                    "false": ""
                }
            },
            "use-cpp-inline-semantics": {
                "type": "selectable",
                "command": {
                    "true": "--use_c++_inline",
                    "false": ""
                }
            },
            "require-prototypes": {
                "type": "selectable",
                "command": {
                    "true": "--require_prototypes",
                    "false": ""
                }
            },
            "language-conformance": {
                "type": "selectable",
                "command": {
                    "strict": "--strict",
                    "standard": "",
                    "IAR-extensions": "-e",
                    "false": "-e"
                }
            },
            "plain-char-is-signed": {
                "type": "selectable",
                "command": {
                    "true": "--char_is_signed",
                    "false": "--char_is_unsigned"
                }
            },
            "floating-point": {
                "type": "selectable",
                "command": {
                    "true": "--relaxed_fp",
                    "false": ""
                }
            },
            "multibyte-support": {
                "type": "selectable",
                "command": {
                    "true": "--enable_multibytes",
                    "false": ""
                }
            },
            "virtual-bytes": {
                "type": "selectable",
                "command": {
                    "16": "--vregs 16",
                    "12": "--vregs 12",
                    "false": "--vregs 16"
                }
            },
            "optimization": {
                "type": "selectable",
                "command": {
                    "no": "-On --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa --no_cross_call",
                    "low": "-Ol --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa --no_cross_call",
                    "medium": "-Om --no_unroll --no_inline --no_tbaa --no_cross_call",
                    "high": "-Oh",
                    "size": "-Ohz",
                    "speed": "-Ohs --no_cross_call",
                    "speed-no-size-constraints": "-Ohs --no_cross_call --no_size_constraints",
                    "false": "-Ol --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa --no_cross_call"
                }
            },
            "code-mode": {
                "type": "keyValue",
                "command": "--code_model ",
                "enum": {
                    "small": "small",
                    "medium": "medium",
                    "large": "large",
                    "default": "medium"
                }
            },
            "data-mode": {
                "type": "keyValue",
                "command": "--data_model ",
                "enum": {
                    "small": "small",
                    "medium": "medium",
                    "large": "large",
                    "default": "medium"
                }
            },
            "turn-Warning-into-errors": {
                "type": "selectable",
                "command": {
                    "true": "--warnings_are_errors",
                    "false": ""
                }
            }
        },
        "asm": {
            "$path": "stm8\\bin\\iasmstm8.exe",
            "$includes": {
                "body": "-I ${value}"
            },
            "$defines": {
                "body": "-D ${key}=${value}"
            },
            "$invoke": {
                "useFile": true,
                "body": "-f {value}"
            },
            "$output": "-o ${out} ${in}",
            "$default": [
                "--debug",
                "--silent"
            ],
            "$listPath": {
                "type": "value",
                "command": "-lx ${listPath}"
            },
            "case-sensitive-user-symbols": {
                "type": "selectable",
                "command": {
                    "true": "--case_insensitive",
                    "false": ""
                }
            },
            "multibyte-support": {
                "type": "selectable",
                "command": {
                    "true": "--enable_multibytes",
                    "false": ""
                }
            },
            "allow-mnemonics-first-column": {
                "type": "selectable",
                "command": {
                    "true": "--mnem_first",
                    "false": ""
                }
            },
            "allow-directives-first-column": {
                "type": "selectable",
                "command": {
                    "true": "--dir_first",
                    "false": ""
                }
            }
        },
        "linker": {
            "$path": "stm8\\bin\\ilinkstm8.exe",
            "$invoke": {
                "useFile": true,
                "body": "-f ${value}"
            },
            "$default": [
                "--silent"
            ],
            "$output": "${in} -o ${out}",
            "$outputSuffix": ".out",
            "$matcher": [
                "readonly\\s+code memory\\s*$",
                "readonly\\s+data memory\\s*$",
                "readwrite\\s+data memory\\s*$"
            ],
            "$linkMap": {
                "type": "value",
                "command": "--map ${mapPath}"
            },
            "linker-config": {
                "type": "value",
                "command": "--config ",
                "description": ""
            },
            "config-defines": {
                "type": "list",
                "command": "--config_def "
            },
            "program-entry": {
                "type": "value",
                "command": "--entry "
            },
            "auto-search-runtime-lib": {
                "type": "selectable",
                "command": {
                    "true": "",
                    "false": "--no_library_search"
                }
            },
            "use-C_SPY-debug-lib": {
                "type": "selectable",
                "command": {
                    "true": "--debug_lib",
                    "false": ""
                }
            },
            "merge-duplicate-sections": {
                "command": {
                    "true": "--merge_duplicate_sections"
                }
            },
            "$outputBin": {
                "$path": "stm8\\bin\\ielftool.exe",
                "$outputSuffix": ".hex",
                "command": "--silent --ihex ${linkerOutput} ${output}"
            }
        }
    }
}